#!/bin/bash
#set -e
##################################################################################################################
# Written to be used on 64 bits computers
# Author 	: 	DarkXero
# Website 	: 	http://xerolinux.xyz
##################################################################################################################
tput setaf 1
echo "###############################################################################"
echo "#                         !!! XeroLinux Reset Tool !!!                        #"
echo "#                                                                             #"
echo "#              Having Issues With Messed Up Layout or Settings ?              #"
echo "#                                                                             #"
echo "#      This Will Reset To ISO Defaults. Current Settings Will, Be Lost !      #"
echo "#  System Will Reboot. Settings Will Be Backed Up Under ~/.config-backup-date  #"
echo "###############################################################################"
tput sgr0
echo
echo "Hey there, So What Shall We Do ?"
echo
echo "1.  Reset to ISO Defaults."
echo "2.  Nothing/Exit"
echo
echo "Please Select an Option..."
echo

read CHOICE

case $CHOICE in

    1 )
      echo "Creating Backups of ~/.config folder"
      echo "#####################################"
      cp -Rf ~/.config ~/.config-backup-$(date +%Y.%m.%d-%H.%M.%S)
      rm -Rf ~/.local/share/plasma/
      sleep 2
      echo "#################################"
      echo "Restoring default settings"
      echo "#################################"
      sleep 2
      cp -rf /etc/skel/. ~
      sudo pacman -S latte-dock-git kvantum --noconfirm --needed
      sudo rm /usr/share/defaultbg/XeroLinux.png
      cd /usr/share/defaultbg/ && sudo wget https://raw.githubusercontent.com/xerolinux/xero_iso/main/archiso/airootfs/usr/share/defaultbg/XeroLinux.png
      sudo rm /etc/sddm.conf.d/kde_settings.conf
      cd /etc/sddm.conf.d/ && sudo wget https://raw.githubusercontent.com/XeroLinuxDev/xero_iso_dev/main/archiso/airootfs/etc/sddm.conf.d/kde_settings.conf
      sudo sed -i "s/Current/#Current/g" /etc/sddm.conf
      cd ~ && git clone https://github.com/xerolinux/default-grub.git
      cd ~/default-grub/ && sudo ./install.sh
      rm -rf ~/default-grub
      sleep 2
      echo "#################################"
      echo "Done! Rebooting to Apply Settings"
      echo "#################################"
      sleep 2
      reboot

      ;;

    2 )
      echo
      echo "########################################"
      echo "   We did nothing as per your request   "
      echo "########################################"
      echo
      ;;

    * )
      echo "#################################"
      echo "Choose the correct number"
      echo "#################################"
      ;;
esac
